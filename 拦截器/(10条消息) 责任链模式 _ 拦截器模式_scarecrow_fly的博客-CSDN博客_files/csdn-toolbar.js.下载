"use strict";window._hmt=window._hmt||[],function(){function e(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n++){var o=t[n].split("=");if(o[0]==e&&"UD"==e)return decodeURIComponent(o[1]);if(o[0]==e)return decodeURI(o[1])}}function t(){var e=window.location.host;return 0===e.indexOf("blog")?"UA-127895514-2":0===e.indexOf("download")?"UA-127895514-8":0===e.indexOf("edu")?"UA-127895514-9":0===e.indexOf("bbs")?"UA-127895514-4":0===e.indexOf("ask")?"UA-127895514-5":0===e.indexOf("gitbook")?"UA-127895514-10":0===e.indexOf("iteye")?"UA-127895514-6":0===e.indexOf("passport")?"UA-127895514-7":0===e.indexOf("so")?"UA-127895514-3":0===e.indexOf("www")?e.indexOf("iteye")>0?"UA-127895514-6":"UA-127895514-1":""}var n="6bcd52f51e9b3dce32bec4a3997715ac",o="facf15707d34a73694bf5c0d571a4a72",a=function(){var e="6bcd52f51e9b3dce32bec4a3997715ac",t=$('meta[name="toolbar"]');if(t.length){var n=t.attr("content")||{};n=JSON.parse(n),e=n.hmId||e}return e}();!function(e){for(var t=document.cookie.split("; "),a=0;a<t.length;a++){var r=t[a].split("=");/^Hm\_.+\_.+$/.test(r[0])&&-1===r[0].indexOf(e)&&-1===r[0].indexOf(n)&&-1===r[0].indexOf(o)&&(document.cookie=r[0]+"="+escape("")+";max-age=0;domain=.csdn.net;path=/")}}(a),function(e){_hmt.push(["_setAccount",e])}(a),function(){try{var t=!!e("UN"),n=!!e("UserName"),o=e("p_uid");o=o?o.substr(1,1):0,_hmt.push(["_setUserProperty",{islogin:+t,isonline:+n,isvip:+(1==o)}]),n&&_hmt.push(["_setUserId",e("UserName")]),_hmt.push(["_setUserTag","6525",e("uuid_tt_dd")])}catch(e){void 0}}();var r=document.createElement("script");r.src="https://hm.baidu.com/hm.js?"+a;var s=document.getElementsByTagName("script")[0];if(s.parentNode.insertBefore(r,s),document.referrer.indexOf("google.com")>-1){var c=function(){dataLayer.push(arguments)},i=document.createElement("script");i.src="https://www.googletagmanager.com/gtag/js?id="+t(),s.parentNode.insertBefore(i,s),window.dataLayer=window.dataLayer||[];var l=e("UserName")||"";c("js",new Date),c("config",t()),l&&c("set",{user_id:l})}}(),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://g.csdnimg.cn/??asdf/1.1.2/trackad.js,iconfont/nav/iconfont-1.0.1.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),function(){function e(e,t,n){var o=new Date;if(-1==n)return void(document.cookie=e+"="+escape(t)+";domain=.csdn.net;path=/");if(n)o.setTime(o.getTime()+n);else{o.setTime(o.getTime()+2592e6)}document.cookie=e+"="+escape(t)+";expires="+o.toGMTString()+";domain=.csdn.net;path=/"}var t=["blog","bbs","download","ask","edu","biwen"],n=document.referrer;if(""!==n)if(n.indexOf(".csdn.net")>-1)for(var o=0;o<t.length;o++)n.indexOf(t[o]+".csdn.net")>-1&&e("c_ref",n,-1);else e("c_ref",n.split("?")[0],-1)}(),function(){function e(e,t){var n=document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,t&&t())}:n.onload=function(){t&&t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}window.csdn=window.csdn||{};var t=window.location.host,n=function(e,t){var n=e.include||["*"],o=e.exclude||[],a=n.filter(function(e){return!!~n.indexOf("*")||!!~t.indexOf(e)}).length>0,r=o.filter(function(e){return!!~o.indexOf("*")||!!~t.indexOf(e)}).length>0;return a&&!r};[{url:"//g.csdnimg.cn/??login-box/1.1.4/login-box.js,login-box/1.1.4/login-auto.js",exclude:["passport.csdn","edu.csdn","job.csdn","mall.csdn","mp.csdn",".i.csdn"],include:["*"],before:function(){window.csdn.loginBox=window.csdn.loginBox||{},window.csdn.loginBox.loginAutoParams={loginAutoMaxNum:5}},isInit:function(){if(window.csdn.loginBox&&window.csdn.loginBox.scope)return void 0,!0}}].forEach(function(o){var a=o.isInit&&o.isInit(),r=n(o,t);void 0,r&&!a&&(o.before&&o.before(),o.url&&e(o.url,o.after))})}(),window._hmt=window._hmt||[],function(e,t){function n(e){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function o(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n++){var o=t[n].split("=");if(o[0]==e&&"UD"==e)return decodeURIComponent(o[1]);if(o[0]==e)return decodeURI(o[1])}}function a(e,t,n){var o=new Date;if(-1==n)return void(document.cookie=e+"="+escape(t)+";domain=.csdn.net;path=/");if(n)o.setTime(o.getTime()+n);else{o.setTime(o.getTime()+2592e6)}document.cookie=e+"="+escape(t)+";expires="+o.toGMTString()+";domain=.csdn.net;path=/"}function r(e){var t=new Date;document.cookie=e+"="+escape("1")+";max-age=0;expires="+t.toGMTString()+";domain=.csdn.net;path=/"}function s(e,t){var n=document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,t&&t())}:n.onload=function(){t&&t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}function c(e,t){var n,o=null;return function(){var a=this,r=new Date;r-o-t>0?(n&&(clearTimeout(n),n=null),e.apply(a,arguments),o=r):n||(n=setTimeout(function(){e.apply(a,arguments)},t))}}function i(e){e=e.replace("https://","");var t=e.split(".")[0];return~location.host.indexOf(t)}function l(e){return 0==e.length?"":e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;")}function d(n){if("[object Object]"==Object.prototype.toString.call(n)){var o=t("#csdn-toolbar"),a=n.need_first_suspend||!1,r=n.need_little_suspend||!1,s=n.little_tool_id||"",i=n.little_need_insert_type||"",l=n.need_change_function||"",u="",p="";if(1!=a||1!=r){if(r&&""!=s&&(o=t(s)),r&&s&&""!=i&&(u="."+i,p=t(u)),0===o.length)return void b.push(d.bind(this,n));var h=c(function(){if((document.documentElement.scrollTop||document.body.scrollTop)>=50)o.css({position:"fixed",top:"0",left:"0","z-index":"9999",width:"100%"}),r&&t(".secodn_level_csdn_logo").length&&t(".secodn_level_csdn_logo").css({display:"block"}),r&&""!=i&&(t("body").addClass("toolbar-second-drop"),"onlySearch"==i?t("#csdn_tool_otherPlace").append(p):"onlyUser"==i?t("#csdn_tool_otherPlace").append(p):"searchUser"==i&&(t("#csdn_tool_otherPlace").append(t(".onlySearch")),t("#csdn_tool_otherPlace").append(t(".onlyUser")))),"function"==typeof l&&l("fixed");else{if(o.css({position:"static","z-index":""}),r&&t(".secodn_level_csdn_logo").length&&t(".secodn_level_csdn_logo").css({display:"none"}),r&&""!=i){t("body").removeClass("toolbar-second-drop");var e=t("#csdn-toolbar .toolbar-container");"onlySearch"==i?e.find(".toolbar-menus").after(p):"onlyUser"==i?e.append(p):"searchUser"==i&&(e.append(t(".onlySearch")),e.append(t(".onlyUser")))}"function"==typeof l&&l("noFixed")}},80);(document.documentElement.scrollTop||document.body.scrollTop)>50&&h(),t(e).on("scroll",h)}}}function u(){var t=e.location.host,n=t.split(".")[0],o="";switch(n){case"www":case"blog":case"bbs":o="";break;case"download":o="doc";break;case"ask":case"gitchat":case"geek":o="";break;case"edu":o="course";break;default:o=""}return t.indexOf(".blog.csdn.net")>-1&&(o="blog"),o}function p(e){var t={};return location.href.replace(/([^*#&=?]+)=([^*#&=?]+)/g,function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var a=n[1],r=n[2];t[a]=r}),e?t[e]:t}function h(e){var t=e.start,n=e.end;if(t&&n){var o=(new Date).getTime(),t=new Date(t).getTime(),n=new Date(n).getTime();return o>=t&&o<=n}}function m(e){try{e&&t(document).trigger(e)}catch(e){void 0}}function f(){this.currentUser={userName:"",userNick:'<a class="set-nick" href="https://passport.csdn.net/account/profile">设置昵称<span class="write-icon"></span></a>',desc:'<a class="fill-dec" href="//my.csdn.net" target="_blank">编辑自我介绍，让更多人了解你<span class="write-icon"></span></a>',avatar:""},this.hasLogin=!1,this.$container="",this.announcement=0,this.logoData={title:"CSDN首页",url:{default:"https://csdnimg.cn/cdn/content-toolbar/csdn-logo.png?v=20200416.1",dark:"https://csdnimg.cn/release/cmsfe/public/asset/libs/toolbar/logo2.png?v=1000",home:"https://csdnimg.cn/release/cmsfe/public/asset/libs/toolbar/logo2.png?v=1000"}},this.navData=[{id:"blog",name:"博客",url:"https://blog.csdn.net/",report:{mod:"popu_336",dest:"https://blog.csdn.net/",extend1:"博客"},children:[{name:"创作中心",url:"https://mp.csdn.net?utm_medium=fe.tool_bar_second.blog.creative_center",report:'{"mod":"1593505904_001"}'}]},{id:"edu",name:"学院",url:"https://edu.csdn.net/",report:{mod:"popu_336",dest:"https://edu.csdn.net/",extend1:"学院"},children:[]},{id:"download",name:"下载",url:"https://download.csdn.net/",report:{mod:"popu_336",dest:"https://download.csdn.net/",extend1:"下载"},children:[{name:"我的资源",url:"https://mp.csdn.net/console/upDetailed?utm_medium=fe.tool_bar_second.download.my_resources",report:'{"mod":"1593505904_002"}'}]},{id:"bbs",name:"论坛",url:"https://bbs.csdn.net/",report:{mod:"popu_336",dest:"https://bbs.csdn.net/",extend1:"论坛"},children:[{name:"我的积分",url:"https://mp.csdn.net/console/upDetailed?utm_medium=fe.tool_bar_second.download.my_points",report:'{"mod":"1593505904_003"}'}]},{id:"aks",name:"问答",url:"https://ask.csdn.net/",report:{mod:"popu_336",dest:"https://ask.csdn.net/",extend1:"问答"},children:[]},{id:"live",name:"直播",url:"https://live.csdn.net/",report:{mod:"popu_336",dest:"https://live.csdn.net/",extend1:"直播"},children:[]},{id:"job",name:"招聘",url:"https://job.csdn.net/",report:{mod:"popu_336",dest:"https://job.csdn.net/",extend1:"招聘"},children:[]},{id:"vip",name:"VIP会员",url:"https://mall.csdn.net/vip",report:{mod:"popu_336",dest:"https://mall.csdn.net/vip",extend1:"VIP会员"},children:[{name:"VIP权益",url:"https://csdn.net/vip?utm_medium=fe.tool_bar_second.download.vip",report:'{"mod":"1593505904_004"}'}]}],this.personMenuData=[],this.advertData={date:{start:"2020/07/03 08:50:00",end:"2020/07/04 17:30:00"},background:{large:"https://csdnimg.cn/public/publick_img/ad_20200703_toolbar325.jpg",default:"https://csdnimg.cn/public/publick_img/ad_20200703_toolbar80_2.jpg"},color:"#027ef2",url:"https://aiprocon.csdn.net/p/live?utm_source=live_703"},this.init()}e.csdn=e.csdn||{},e.csdn.configuration_tool_parameterv=d;var g=["csdn-toolbar-home","csdn-toolbar-dark","csdn-toolbar-home"],b=[],v=0;f.prototype={constructor:f,init:function(){var e=this;e.checkLogin(function(t){t.userName&&(e.hasLogin=!0,_hmt.push(["_setUserTag","5744",t.userName])),e.setPersonMenuData()}),e.getToolbarData(e.render)},render:function(e){var t=this;t.renderToolbar(),t.renderAdvert(),t.renderLogo(),t.renderNav(),t.renderSearch(),t.renderBtns(),t.getHotSearchWordData(t.setSearchInputPlaceholder.bind(t)),t.chain()},setPersonMenuData:function(){this.personMenuData=[{name:"我的关注",url:"https://i.csdn.net/#/uc/follow-list",report:'{"mod":"popu_789","dest":"https://i.csdn.net/#/uc/follow-list","extend1":"我的关注"}',icon:"toolbar-icon-follow",class:""},{name:"我的收藏",url:"https://i.csdn.net/#/uc/collection-list",report:'{"mod":"popu_789","dest":"https://i.csdn.net/#/uc/collection-list","extend1":"我的关注"}',icon:"toolbar-icon-collect",class:""},{name:"个人中心",url:"https://i.csdn.net/#/uc/profile",report:'{"mod":"popu_789","dest":"https://i.csdn.net/#/uc/profile","extend1":"个人中心"}',icon:"toolbar-icon-profile",class:""},{name:"帐号设置",url:"https://i.csdn.net/#/uc/account/index",report:'{"mod":"popu_789","dest":"https://i.csdn.net/#/uc/account/index","extend1":"帐号设置"}',icon:"toolbar-icon-account",class:"toolbar-subMenu-border"},{name:"我的博客",url:"https://blog.csdn.net/"+this.currentUser.userName,report:'{"mod":"popu_789","dest":"https://blog.csdn.net/","extend1":"我的博客"}',icon:"toolbar-icon-blog",class:""},{name:"管理博客",url:"https://mp.csdn.net/console/article",report:'{"mod":"popu_789","dest":"https://mp.csdn.net/console/article","extend1":"管理博客"}',icon:"toolbar-icon-mp",class:""},{name:"我的学院",url:"https://edu.csdn.net/mycollege",report:'{"mod":"popu_789","dest":"https://edu.csdn.net/mycollege","extend1":"我的学院"}',icon:"toolbar-icon-edu",class:""},{name:"我的下载",url:"https://mp.csdn.net/console/upDetailed",report:'{"mod":"popu_789","dest":"https://mp.csdn.net/console/upDetailed","extend1":"我的下载"}',icon:"toolbar-icon-download",class:"toolbar-subMenu-border"},{name:"我的钱包",url:"https://i.csdn.net/#/wallet/index",report:'{"mod":"popu_789","dest":"https://i.csdn.net/#/wallet/index","extend1":"我的钱包"}',icon:"toolbar-icon-wallet",class:""},{name:"我的订单",url:"https://mall.csdn.net/myorder",report:'{"mod":"popu_789","dest":"https://mall.csdn.net/myorder","extend1":"我的订单"}',icon:"toolbar-icon-order",class:"toolbar-subMenu-border"},{name:"帮助",url:"https://blog.csdn.net/blogdevteam/article/details/103478461",report:'{"mod":"popu_789","dest":"https://blog.csdn.net/blogdevteam/article/details/103478461","extend1":"帮助"}',icon:"toolbar-icon-help",class:""},{name:"退出",url:"javascript:;",icon:"toolbar-icon-logout",class:"toolbar-btn-logout"}]},getAvatarByAu:function(e){return!!e&&"https://profile.csdnimg.cn/"+e.split("").join("/")+"/2_"+(this.currentUser.userName&&this.currentUser.userName.toLowerCase())},checkLogin:function(e){var t=o("AU"),n=o("UserNick"),a=o("UserName"),r=o("UD");this.currentUser.userNick=n,this.currentUser.userName=a,this.currentUser.avatar=this.getAvatarByAu(t),this.currentUser.desc=r?l(r.replace(/\+/g," ")):this.currentUser.desc,e&&e(this.currentUser)},renderToolbar:function(){var e=this,n=e.getToolbarStyle(),o=t('<div id="csdn-toolbar">\n                    <div class="toolbar-inside" style="'+n+'">\n                      <div class="toolbar-container csdn-toolbar-clearfix">\n                        <div class="toolbar-logo toolbar-subMenu-box csdn-toolbar-fl"></div>\n                        <ul class="toolbar-menus csdn-toolbar-fl"></ul>\n                        <div class="toolbar-search onlySearch csdn-toolbar-fl"></div>\n                        <div class="toolbar-btns onlyUser csdn-toolbar-fr"></div>\n                      </div>\n                    </div>\n                  </div>');return t("body").prepend(o),e.$container=o.find(".toolbar-container"),e.$logoBox=o.find(".toolbar-logo"),e.$NavBox=o.find(".toolbar-menus"),e.$searchBox=o.find(".toolbar-search"),e.$btnsBox=o.find(".toolbar-btns"),t(document).on("click",function(n){0!==t(n.target).closest(".toolbar-search").length||e.searchInputFocus||(e.clearSeachDropMenu(),e.toggleSearchBarInput())}),this},renderNav:function(){var e=""+this.navData.map(function(e){return e.active=i(e.url),'<li class="'+(e.active?"active ":"")+(e.children.length?"toolbar-subMenu-box":"")+"\">\n                                <a data-report-click='"+JSON.stringify(e.report)+"' href='"+e.url+"'>"+e.name+"</a>\n                                "+(e.children.length?'<div class="toolbar-subMenu">\n                                    '+e.children.map(function(e){return"<a data-report-click='"+JSON.stringify(e.report)+"' target=\"_blank\" href='"+e.url+"'>"+e.name+"</a>"}).join("")+"\n                                  </div>":"")+"\n                              </li>"}).join("");return this.$NavBox.append(e),this},renderLogo:function(){var e=["home","dark","home"],t=e[v],n='<a href="https://www.csdn.net"><img title="'+this.logoData.title+'" src="'+this.logoData.url[t]+'"></a>\n                    <div class="toolbar-subMenu">\n                      <img width="96" height="96" src="https://csdnimg.cn/public/common/toolbar/images/csdnqr@2x.png">\n                    </div>';return void 0,this.$logoBox.append(n),this},renderSearch:function(){var e=this,n=t('<div class="toolbar-search-container">\n                    <input id="toolbar-search-input" type="text" value="" placeholder="'+this.getSearchInputPlaceHolder()+'">\n                    <button id="toolbar-search-button"></button>\n                  </div>');return n.on("focus","#toolbar-search-input",function(n){""===t(this).val()&&(e.renderSearchHistoryDropMenu(),e.getHotSearchData()),e.toggleSearchBarInput("focus"),e.searchInputFocus=!0}).on("blur","#toolbar-search-input",function(t){e.searchInputFocus=!1}).on("input","#toolbar-search-input",function(n){var o=t(this),a=o.val();void 0,""===a?(e.renderSearchHistoryDropMenu(),e.getHotSearchData()):t(".toolbar-search-drop-menu").remove()}).on("click","button",function(n){var o=t("#toolbar-search-input").val();return e.clickSearchBtnHandler.call(e,o),!1}).on("keyup","#toolbar-search-input",function(e){13===e.keyCode&&t("#toolbar-search-button").trigger("click")}),this.$searchBox.append(n),this.renderBaiduSearchDropMenu(),this},renderBtns:function(){var e=this,n=t('<div class="toolbar-btn toolbar-btn-write csdn-toolbar-fl '+(this.hasLogin?"toolbar-subMenu-box":"")+'">\n                    <a href="https://mp.csdn.net"><i></i>创作中心</a>\n                    '+(this.hasLogin?'<div class="toolbar-subMenu">\n                    <a data-report-click=\'{"mod":"1586414474_001","dest":"https://mp.csdn.net/console/editor/html"}\' target="_blank" href="https://mp.csdn.net/console/editor/html">写博客</a>\n                    <a data-report-click=\'{"mod":"1586414474_002","dest":"https://blink.csdn.net/?utm_source=103209678"}\' target="_blank" href="https://blink.csdn.net/?utm_source=103209678">发Blink</a>\n                    </div>':"")+'\n                    \n                  </div>\n                  <a href="https://i.csdn.net/#/uc/collection-list" class="toolbar-btn toolbar-btn-collect csdn-toolbar-fl"></a>\n                  <div class="toolbar-btn toolbar-btn-msg csdn-toolbar-fl">\n                    <div class="toolbar-subMenu-box">\n                      <a id="toolbar-remind" href="https://i.csdn.net/#/msg/index"></a>\n                    </div>\n                    <div class="toolbar-msg-box"></div>\n                  </div>\n                  <div class="toolbar-btn-login csdn-toolbar-fl '+(this.hasLogin?"toolbar-subMenu-box":"")+'">\n                    '+(this.currentUser.avatar?'<a class="hasAvatar" href="https://i.csdn.net"><img src="'+this.currentUser.avatar+'"></a>':' <a href="https://passport.csdn.net/account/login">登录/注册</a>')+"\n                    "+(this.hasLogin?'<div class="toolbar-subMenu">'+this.personMenuData.map(function(e){return"<a "+(e.report?"data-report-click='"+e.report+"'":"")+" href='"+e.url+"' class='"+e.class+"'><i class=\"toolbar-icon "+e.icon+'"></i>'+e.name+"</a>"}).join("")+"</div>":"")+"\n                  </div>");return this.$btnsBox.append(n),n.on("click",".toolbar-btn-logout",function(){e.clickLogoutBtnHandler()}),this.$msgBox=n.find(".toolbar-msg-box"),this},renderMsgMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n='<div class="toolbar-subMenu">\n                    <a id="toolbar-announcement" href="'+(e.announcement?e.announcement.announcementUrl:"javaScript:;")+'">公告'+(e.announcement&&e.announcement.announcementCount?"<i>"+(e.announcement.announcementCount>99?"99+":e.announcement.announcementCount)+"</i>":"")+"</a>\n                    "+(this.hasLogin?'<a href="https://i.csdn.net/#/msg/index">评论'+(e.comment?"<i>"+(e.comment>99?"99+":e.comment)+"</i>":"")+'</a>\n                                      <a href="https://i.csdn.net/#/msg/attention">关注'+(e.follow?"<i>"+(e.follow>99?"99+":e.follow)+"</i>":"")+'</a>         \n                                      <a href="https://i.csdn.net/#/msg/like">点赞'+(e.thumb_up?"<i>"+(e.thumb_up>99?"99+":e.thumb_up)+"</i>":"")+'</a>\n                                      <a href="https://im.csdn.net/im/main.html">私信'+(e.im?"<i>"+(e.im>99?"99+":e.im)+"</i>":"")+'</a>\n                                      <a href="https://i.csdn.net/#/msg/answer">回答'+(e.invitation?"<i>"+(e.invitation>99?"99+":e.invitation)+"</i>":"")+'</a>\n                                      <a href="https://i.csdn.net/#/msg/notice">系统通知'+(e.system?"<i>"+(e.system>99?"99+":e.system)+"</i>":"")+'</a>\n                                      <a href="https://i.csdn.net/#/msg/setting">消息设置</a>':"")+"     \n                  </div>";this.$btnsBox.find(".toolbar-btn-msg .toolbar-subMenu-box").append(n),t("#toolbar-announcement").off("click").on("click",this.clickAnnouncementHandler.bind(this)),e.announcement&&this.setRemind(e.announcement.announcementUrl),b.length&&b.forEach(function(e){return e()})},renderCoupon:function(n){var o=t('<a href="https://i.csdn.net/#/msg/notice" class="toolbar-msg-coupon">你有一张VIP限时优惠券哦</a>');n&&n>0&&-1===e.location.href.indexOf("assign_skin_id")&&(this.$msgBox.append(o),setTimeout(function(){o.remove()},5e3))},renderGuide:function(e){var n=this,r=o("c-toolbar-loginguide"),s=t('<span class="toolbar-msg-guide"><a href="https://i.csdn.net/#/msg/index">登录查看未读消息</a><i></i></span>');!r&&e&&(s.find("i").click(function(e){a("c-toolbar-loginguide",1,864e5),s.remove()}),!n.hasLogin&&e>0&&this.$msgBox.append(s))},renderLiveMsg:function(e){var n=this;if(e&&1===e.status){var o=t('<div class="toolbar-msg-live">\n                      <a class="toolbar-msg-live-title" target="_blank" href="'+e.url+'">'+e.title+'</a>\n                      <p class="toolbar-msg-live-count"><i></i>'+e.count+'人在看</p>\n                      <div class="toolbar-msg-live-avatar"><span><img src="https://avatar.csdnimg.cn/6/0/6/3_qq_36556893_1548408119.jpg" alt=""></span></div>\n                      <span class="toolbar-msg-live-close"></span>\n                    </div>');o.on("click",".toolbar-msg-live-close",function(e){o.remove()}),o.on("click",".toolbar-msg-live-title",function(t){n.reportLiveId(+e.messageId)}),n.$msgBox.append(o),setTimeout(function(){o.remove()},15e3)}},renderAdvert:function(){var n=this,s=n.advertData;if(!s||!h(s.date))return void r("is_advert");if("https://www.csdn.net/"!==e.location.href){var c=!!o("is_advert"),i=t('<div class="toolbar-advert">\n              <a href="'+s.url+'" style="background: '+s.color+';" class="toolbar-advert-default '+(c?"":"toolbar-advert-lg")+'"><img src="'+(c?s.background.default:s.background.large)+'"></a>\n              <span class="toolbar-adver-btn">×</span>\n            </div>');i.find(".toolbar-adver-btn").click(function(e){return i.remove(),m("toolbarHeightChange"),!1}),t("#csdn-toolbar").prepend(i),m("toolbarHeightChange"),!c&&a("is_advert","1",864e5),i.on("transitionend",function(e){m("toolbarHeightChange")}),setTimeout(function(){!c&&t(".toolbar-advert-default").removeClass("toolbar-advert-lg").find("img").attr("src",s.background.default),m("toolbarHeightChange")},5e3)}},reportLiveId:function(e){if(e===e){var n={messageId:e};n=JSON.stringify?JSON.stringify(n):'{"messageId":'+e+"}",t.ajax({url:"https://msg.csdn.net/v1/web/message/view/live",type:"post",data:n,contentType:"application/json",xhrFields:{withCredentials:!0},dataType:"json",success:function(e){}})}},renderSearchHistoryDropMenu:function(){var e=this,n=this.getSearchHistoryData(),o=t('<div class="toolbar-search-drop-menu '+(n.length?"toolbar-search-half":"")+'">\n                        '+(n.length?'<div class="toolbar-search-history">\n                          <p class="toolbar-search-title">搜索历史<span class="toolbar-search-clear"><i></i>清空</span></p>\n                          <ul>\n                            '+n.map(function(e){return'<li class="toolbar-search-item" data-type="history">'+e+"</li>"}).join("")+"\n                          </ul>\n                        </div>":"")+"\n                      </div>");o.on("click",".toolbar-search-clear",function(t){e.clearSearchHistory(),o.find(".toolbar-search-history").remove(),o.removeClass("toolbar-search-half")}).on("click","li",function(n){e.clickSearchItemHandler.call(e,t(this)),e.setAnimate(e.$NavBox,{width:"auto"})}),e.clearSeachDropMenu(),e.$searchHotAndHistoryDropMenu=o,e.$searchBox.append(o),e.buriedPoint({mod:"popu_369"})},renderSearchHotDropMenu:function(e){if(e){var n=t('<div class="toolbar-search-hot">\n                      <p class="toolbar-search-title">CSDN热搜</p>\n                      <ul>\n                        '+e.map(function(e,t){return'<li class="toolbar-search-item '+(t<=2||e.hot?"hot":"")+'" data-type="hot">'+(e.productId||e.word)+"</li>"}).join("")+"\n                      </ul>\n                    </div>");this.$searchHotAndHistoryDropMenu&&this.$searchHotAndHistoryDropMenu.append(n)}},renderBaiduSearchDropMenu:function(){s("https://csdnimg.cn/search/baidu_opensug-1.0.1.js",function(){BaiduSuggestion.bind("toolbar-search-input",{XOffset:"-1",YOffset:"-8",fontSize:"14px",width:260,"line-height":"32px",padding:"0 16px",color:t(".toolbar-search-drop-menu ").css("color"),borderColor:t(".toolbar-search-drop-menu ").css("background-color"),bgcolorHI:"#F0F1F2",sugSubmit:!1},function(){t("#toolbar-search-button").click()})})},clickSearchBtnHandler:function(n){var o=encodeURIComponent(n||this.placeHolder),a=!n&&this.placeHolder,r="",s="https://so.csdn.net/so/search/s.do?q="+o+"&t="+u()+"&u=",c=a?this.urlParamsPlaceholder:this.urlParams,i=this;if(void 0,"undefined"===o)return t("#toolbar-search-input").focus(),!1;if(i.addSearchHistory(decodeURIComponent(o)),c){for(var l in c)if(c.hasOwnProperty(l)){var d=c[l];r+="&"+l+"="+d}s+=r}this.urlParams="",e.location.href.indexOf("so.csdn.net")>-1?e.csdn&&e.csdn.toolbarSearchUrl?e.location.href=e.csdn.toolbarSearchUrl+o+r:e.location.href=s:e.open(s)},clickSearchItemHandler:function(e){var n=e.text(),o=e.data("type"),a=this,r=e.index(),s={history:"popu_845",hot:"popu_846"},c={mod:s[o],extra:JSON.stringify({searchword:n})};if("hot"===o){var i=a.hotSearchData[r],l=i&&i.reportData;c=l?a.getHotSearchPointData(l,n):c}void 0,a.buriedPoint(c),t("#toolbar-search-input").val(n).blur(),t("#toolbar-search-button").click(),a.clearSeachDropMenu(),a.toggleSearchBarInput()},clickAnnouncementHandler:function(){this.hasLogin&&(t("#toolbar-announcement").find(">i").remove(),this.announcement&&(this.announcement.announcementCount=0)&&a("announcement",encodeURIComponent(JSON.stringify(this.announcement)),this.announcement.announcementExpire),this.clearReadAnnouncement())},clickLogoutBtnHandler:function(){var t={mod:"popu_789"},n="https://passport.csdn.net/account/logout?from="+encodeURIComponent(e.location.href);t.dest=n,t.extend1="退出",e.location.href=n,csdn&&csdn.report&&csdn.report.reportClick(t)},clearSeachDropMenu:function(){t(".toolbar-search-drop-menu").remove()},clearReadAnnouncement:function(){t.ajax({url:"https://msg.csdn.net/v1/web/message/read_announcement",type:"post",contentType:"application/json",xhrFields:{withCredentials:!0},dataType:"json",success:function(e){},error:function(e){void 0}})},setUserAvatar:function(e){var n=e.avatarUrl;if(e.totalCount>0&&n&&!this.hasLogin&&o("UN")){var a='<a class="hasAvatar" href="https://passport.csdn.net/account/login"><img src="'+n+'"></a>';t(".toolbar-btn-login").html(a)}},getHotSearchPointData:function(e,t){var n=this,o={mod:"popu_846",extra:JSON.stringify({searchword:t})},a=Object.assign({},{searchword:t},JSON.parse(e.data.extra||"{}"));return n.urlParams=e.urlParams,Object.assign({},e.data,{extra:JSON.stringify(a),mod:e.data.mod||o.mod})},getReadAnnouncement:function(){var e=this;t.ajax({url:"https://msg.csdn.net/v1/web/message/view/announcement",type:"post",contentType:"application/json",xhrFields:{withCredentials:!0},dataType:"json",success:function(t){if(t.status){var n=t.data;e.announcement=n,a("announcement",encodeURIComponent(JSON.stringify(n)),n.announcementExpire),e.hasLogin?e.getUnreadMsg():e.renderMsgMenu({announcement:n})}},error:function(e){void 0}})},getUnreadMsg:function(){if(this.hasLogin||o("UN")){var e=this,n=JSON.stringify?JSON.stringify({coupon:!0}):'{"coupon":true}';t.ajax({url:"https://msg.csdn.net/v1/web/message/view/unread",type:"post",data:n,contentType:"application/json",xhrFields:{withCredentials:!0},dataType:"json",success:function(t){if(t.status){var n=t.data,o=e.announcement&&e.announcement.announcementCount,a=e.announcement&&e.announcement.announcementUrl;n.totalCount=o?o+n.totalCount:n.totalCount,n.announcement={announcementCount:o,announcementUrl:a},e.setRemind("",n.totalCount),e.setDocumentTitle(n.totalCount),e.renderCoupon(n.coupon_order),e.renderGuide(n.totalCount),e.renderLiveMsg(n.live_info),e.setUserAvatar(n),e.renderMsgMenu(n)}}})}},getSearchHistoryData:function(){return this.getSearchHistoryArray("searchHistoryArray").splice(0,10)},getSearchHistoryArray:function(e){var t=o(e);return t?JSON.parse(decodeURIComponent(t)):[]},getHotSearchData:function(){var e=this;if((new Date).valueOf()-e.copyHotSearchDataTime<=2e3&&e.hotSearchData)return void e.renderSearchHotDropMenu(e.hotSearchData);t.ajax({url:"//silkroad.csdn.net/api/v2/assemble/list/channel/pc_hot_word",type:"get",data:{channel_name:"pc_hot_word",size:10,user_name:e.currentUser.userName,platform:"pc",imei:o("uuid_tt_dd")},contentType:"application/json",dataType:"json",success:function(t){if(200===t.code){var n=t.data&&t.data.items;e.copyHotSearchData(n),e.renderSearchHotDropMenu(n)}},error:function(t){e.hotSearchData&&e.renderSearchHotDropMenu(e.hotSearchData)}})},getHotSearchDataOld:function(){var e=this;if((new Date).valueOf()-e.copyHotSearchDataTime<=2e3&&e.hotSearchData)return void e.renderSearchHotDropMenu(e.hotSearchData);t.ajax({url:"https://redisdatarecall.csdn.net/recommend/soHotWord",type:"get",data:{},contentType:"application/json",dataType:"json",success:function(t){t.status&&(e.copyHotSearchData(t.data),e.renderSearchHotDropMenu(t.data))},error:function(t){e.hotSearchData&&e.renderSearchHotDropMenu(e.hotSearchData)}})},getHotSearchWordData:function(e){var n=this;t.ajax({url:"//silkroad.csdn.net/api/v2/assemble/list/channel/pc_search_hot_word",type:"get",data:{channel_name:"pc_hot_word",size:1,user_name:n.currentUser.userName,platform:"pc",imei:o("uuid_tt_dd")},contentType:"application/json",dataType:"json",success:function(t){if(200===t.code){var o=t.data&&t.data.items.length&&t.data.items[0];o&&(n.hotSearchWordData=o,n.placeHolder=o.productId,n.urlParamsPlaceholder=o.reportData&&o.reportData.urlParams),e&&e()}},error:function(e){void 0}})},copyHotSearchData:function(e){if(e){var t=this;t.hotSearchData=e,t.copyHotSearchDataTime=(new Date).getTime()}},clearSearchHistory:function(){this.updataSearchHistoryArray("searchHistoryArray",[])},updataSearchHistoryArray:function(e,t){a(e,encodeURIComponent(JSON.stringify(t)))},addSearchHistory:function(e){e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");var n=this.getSearchHistoryArray("searchHistoryArray"),o=t.inArray(e,n);o>-1&&n.splice(o,1),""!==t.trim(e)&&n.unshift(e),n.length>10&&n.pop(),this.updataSearchHistoryArray("searchHistoryArray",n)},getSearchInputPlaceHolder:function(){return this.placeHolder?this.placeHolder:~location.host.indexOf("edu")?"搜学院课程":"搜CSDN"},setSearchInputPlaceholder:function(){this.placeHolder&&t("#toolbar-search-input").attr("placeholder",this.placeHolder)},getToolbarData:function(e){var n=this;t.ajax({url:"https://img-home.csdnimg.cn/data_json/toolbar.json",type:"get",dataType:"JSON",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(t){void 0,n.navData=t.menus,n.logoData=t.logo,n.advertData=t.advert,n.background=t.background,e&&e.call(n)},error:function(t){e&&e.call(n)}})},buriedPoint:function(e){try{csdn&&csdn.report&&csdn.report.reportClick(e)}catch(e){void 0}},setDocumentTitle:function(e){var t=document.title;e>0&&(document.title="("+e+"条消息) "+t)},setRemind:function(e,n){var o=t("#toolbar-remind");!this.hasLogin&&e&&o.attr("href",e),n&&o.html('<i class="toolbar-msg-count">'+(n>99?"99+":n)+"</i>")},setAnimate:function(e,t,n){n&&e.animate(t,n)||e.css(t)},toggleNavItems:function(e,t){var n=this.$NavBox.find(">li").eq(e).nextAll();t&&n.show()||n.hide()},toggleSearchBarInput:function(e){"focus"===e?this.setAnimate(this.$NavBox,{width:"242px"
},200):this.setAnimate(this.$NavBox,{width:"auto"},0),this.toggleNavItems(4,"focus"!==e)},getToolbarStyle:function(){var e=this,t=e.background,n=["default","dark","home"],o=n[v];if(t){var a=t[o];if(void 0,a.indexOf("http")>=0)return"background: url("+a+") no-repeat center center;background-size: cover;";if(a.indexOf("#")>=0)return"background: "+a}},chain:function(){var e=o("announcement");return e&&"undefined"!==JSON.parse(decodeURIComponent(e)).announcementUrl?(this.announcement=JSON.parse(decodeURIComponent(e)),this.announcement.isLogin?this.getUnreadMsg():this.getReadAnnouncement(),this):void this.getReadAnnouncement()}},function(){var e=t('meta[name="toolbar"]'),o="",a=0;if(e.length){var r=e.attr("content")||{};r=JSON.parse(r),a=r.type||a}else a=p("toolbarSkinType")||a;o="https://g.csdnimg.cn/common/csdn-toolbar/"+g[a]+".css",v=a,n(o)}(),new f}(window,jQuery);
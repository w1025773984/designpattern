## 概述
### 什么是代理
优点一：可以隐藏委托类的实现;

优点二：可以实现客户与委托类间的解耦，在不修改委托类代码的情况下能够做一些额外的处理。

局限性: 需要在运行前编写好代理类
### 静态代理
```java
// 委托类和代理类都实现了Sell接口
public interface Sell{
    void sell();
    void ad();
}
```
```java
// 生产厂家
public class Vetor implements Sell{
    public void sell(){
        System.out.println("In sell method");
    }

    public void add(){
        System.out.println("ad method");
    }
}


// 代理类
public class BusinessAgent implements Sell{
    private Vetor vetor;
    public BusinessAgent(Vetor vetor){
        this.vetor = vetor;
    }
    public void sell(){
        vetor.sell();
    }

    public void ad(){
        vetor.ad();
    }
}

给Vetor增加过滤功能，只卖给大学生。只需要修改代理类而已，不需要修改Vetor
public class BusinessAgent implements Sell{
    private Vetor vetor;
    public BusinessAgent(Vetor vetor){
        this.vetor = vetor;
    }
    public void sell(){
        if(isCollegeStudent()){
            vetor.sell();
        }
        
    }

    public void ad(){
        vetor.ad();
    }
}
```
### 动态代理
代理类在运行时创建的代理方式叫做动态代理
优点: 很方便的对代理类的函数进行统一处理，而不用修改每个代理类的函数

```java
// 如果Sell接口方法很多，使用静态代理需要手动在每个方法前后加代码，如果需要修改，工作量也更加巨大
public class BusinessAgent implements Sell {
    private Vendor mVendor; 
 
    public BusinessAgent(Vendor vendor) {
        this.mVendor = vendor; 
    } 
 
    public void sell() {
        System.out.println("before");  // 在sell()之前输出before
        mVendor.sell(); 
        System.out.println("after");  //在sell()之后输出before
    } 
 
    public void ad() {
        System.out.println("before"); 
        mVendor.ad(); 
        System.out.println("after"); 
    }
} 


```

使用动态代理
定义一个位于代理类和委托类之间的中介类，实现InvocationHandler接口
```java
// 调用处理程序
public interface InvocationHandler{
    调用代理对象的方法会转到invoke方法中，代理类对象作为proxy参数传入。
    这样就可以在invoke中添加各个方法的统一的处理逻辑
    /**
    * proxy 传进来的代理类
    * method 具体调用的哪个方法
    * args 被调用方法的参数
    **/
    Object invoke(Object proxy, Method method, Object[]args);
}

// 中介类
public class DynamicProxy 

```